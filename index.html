<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>&lt;freebase-search&gt;</title>
    <script src="bower_components/platform/platform.js"></script>
    <link rel="import" href="src/freebase-search.html">
    <link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
        }
    </style>
</head>
<body>
    <label>Search: </label>

    <freebase-search id="search-element" thumbnail="true" lang="en" key="AIzaSyCQXvFx7PMLEImgshuRNJ_vlngLBCTVxkA"></freebase-search>

    <img id="show-image" src="http://placehold.it/160&text=no+image" alt="">
    <div id="show-description"></div>
    <script>
      (function(){
        var element = document.querySelector('#search-element'),
            showDesc = document.querySelector('#show-description'),
            showImg = document.querySelector('#show-image'),
            key = 'AIzaSyCQVC9yA72POMg2VjiQhSJQQP1nf3ToZTs';

        element.addEventListener('result', function(result) {
          var descriptions = result.detail.output.all['description./common/topic/description'];
          if(!!descriptions && descriptions.length > 0) {
            showDesc.innerHTML = descriptions[0];
          } else {
            showDesc.innerHTML = '';
          }

          var images = result.detail.output.all['property./common/topic/image'];

          if(!!images && images.length > 0) {
            showImg.src = 'https://www.googleapis.com/freebase/v1/image' + images[0].mid + '?key=' + key + '&maxwidth=160';
          } else {
            showImg.src = 'http://placehold.it/160&text=no+image';
          }
        });
      })();
    </script>
</body>
</html>
